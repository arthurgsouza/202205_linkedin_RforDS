---
title: "Trabalhando com Dados Pré existentes do R e Verificações Iniciais"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, collapse = TRUE)
```

# Bibliotecas

```{r}
library(tidyverse)
```

# Verificações iniciais

Após fazer a importação de uma base de dados é importante que o objeto seja minimamente examinado. Vamos fazer alguns destes checks iniciais considerando dados sobre os filmes da pixar, que podemos consultar por meio do pacote `pixarfilms` ou na sua versão traduzida para português, disponível no pacote `dados`:

```{r}
pixar_filmes <- dados::pixar_filmes
pixar_filmes
```

De maneira alternativa, podemos considerar também funções como: `View(pixar_filmes)`, `head(pixar_filmes)` ou `str(pixar_filmes)`.

```{r}
pixar_filmes %>% tail()
```

## Linhas, colunas e suas nomenclaturas

Antes de evoluirmos nas análises, é importante ressaltar que é possível encontrar diferentes nomenclaturas no contexto de análise de dados, isto devido a natureza multidiciplinar da área. Neste curso, em que iremos trabalhar basicamente com dados tabulares, iremos nos referir às linhas das bases como observações e as colunas como variáveis, ou ainda features (este último sendo mais usual no contexto de modelagem, que veremos mais à frente). Por fim, para fazer referencia a intersecção entre variáveis e observações, utilizaremos o termo "elementos da tabela".

Para examinarmos a quantidade de linhas e colunas da base, podemos, por exemplo, utilizar:

```{r}
#linhas
pixar_filmes %>% nrow()

#colunas
pixar_filmes %>% ncol()

#ou ambas
pixar_filmes %>% dim()

```

Para o caso de desejarmos checar o nome das colunas da tabela:

```{r}
pixar_filmes %>% names()
```

E apesar das muitas alternativas, de maneira geral trabalharemos com a função `glimpse()` visto esta nos permitir verificar: as dimensões do dataset estudado, os nomes das colunas, suas respectivas classes, e uma amostra das primeiras observações de cada variável:

```{r}
pixar_filmes %>% glimpse()
```

## Identificando as classes das colunas

A partir do resultado da função `glimpse()` temos nosso primeiro contato com um dos conceitos mais fundamentais no contexto de análise de dados: o entendimento dos tipos de dados, no contexto do R: as classes das colunas. Considerando a base `pixar_filmes` podemos observar as classes: character ( \<chr\> ), indicando as coluna que possuem strings, ou seja, palavras; double ( \<dbl\> ), isto é, números; e date ( \<date\> ), basicamente, datas. E saber sobre a classe de cada coluna é extremamente importante, pois te permite indentificar o tipo do dado, e consequentemente, quais calculos que fazem ou não sentido serem realizados. Observe o exemplo abaixo e reflita: sendo a coluna  `filme` uma palavra, faria sentido termos o cálculo de média ?

```{r}
pixar_filmes %>% summary()
```

## Alterando a classe de uma coluna

Note que não necessariamente o computador irá interpretar a variável de maneira coerente com a informação que esta representa. Como exemplo temos a `ordem_lancamento`que faria sentido permitir calculos como mínimo, ou máximo:

```{r}
dados::pixar_filmes %>% 
  select(ordem_lancamento) %>% 
  summary()
```

E que, independente do motivo, está atualmente sendo interpretada pela linguagem como uma variável do tipo `character`. Contudo, é possível ajusta-la para o tipo numérico:

```{r}
dados::pixar_filmes %>% 
  select(ordem_lancamento) %>% 
  mutate(ordem_lancamento = as.numeric(ordem_lancamento)) %>% 
  summary()
```


# Tipos de dados e as Classes do R

Existem algumas maneiras de classificar os diferentes tipos de dados, aqui iremos considerar a organização:

-   variáveis qualitativas, ou categoricas
    -   nominal
    -   ordinal
    
-   variáveis quantitativas, ou numéricas
    -   discretas
    -   contínuas

De modo que para cada um destes tipo, teremos classes no R, indicando quais propriedades e funções fazem ou não sentido para cada coluna da tabela. Importante comentar que nesta organização casos como variáveis lógicas (TRUE/FALSE), ou ainda as datas (ano, mês, dia, etc ), apesar de poderem ser entendidas como subcasos da organização acima, por possuírem muitas características próprias, possuem suas próprias classes. 


## construindo um exemplo

Para apresentar as principais classes do R, iremos construir uma base de dados, visando um exemplo que contemple os tipos de dados mais usuais para uma análise de dados:

```{r}
(dados_pixar <- dados::pixar_filmes %>% 
  left_join(dados::pixar_avalicao_publico) %>% 
  select(-ordem_lancamento, -nota_metacritic, -nota_critics_choice) %>% 
  mutate(duracao = as.integer(duracao)) %>% 
  mutate(classificacao_indicativa  = as_factor(classificacao_indicativa)) %>% 
  mutate(nota_cinema_score = as.ordered(nota_cinema_score)) %>% 
  mutate(classificacao_livre  = if_else(classificacao_indicativa == "Livre", TRUE, FALSE))) %>% 
  glimpse()
```

PAra consultar a classe de uma coluna especifico, podemos fazer:
```{r}

class(dados_pixar$data_lancamento) 

#ou, alternativamente:
dados_pixar %>% pull(data_lancamento) %>% class()
```


# Bibliotecas para exploração 

## janitor
Este pacote 

```{r}
#janitor::
dados_pixar %>% janitor::clean_names() %>%  glimpse()
```


## inspectdf
Este pacote 

```{r}
#inspectdf::
dados_pixar %>% inspectdf::inspect_types()
```

```{r}
dados_pixar %>% inspectdf::inspect_na()
```

```{r}
dados_pixar %>% inspectdf::inspect_imb()
```

```{r}
dados_pixar %>% inspectdf::inspect_imb() %>% inspectdf::show_plot()
```

```{r}
dados_pixar %>% inspectdf::inspect_num()
```

## skimr

Em português skim significa algo como "tirar a nata" de algo, e isto é exatamente o que este pacote faz, visto que nos permite uma visão geral de toda a base, com uma serie de estatísticas importantes, respeitando o tipo de cada coluna:

```{r}
#skimr::
dados_pixar %>%  skimr::skim()
```



## mais pacotes

No R você irá encontrar dezenas de pacotes com o objetivo de "facilitar" a sua visão, particularmente para a exploração descritiva de dados. Bibliotecas como: `visdat`, `naniar`, `DataExplorer`, entre tantas outras. Que tal explorar um pouco por aí? 


# Tipos de dados vs. objetivos de análise 


